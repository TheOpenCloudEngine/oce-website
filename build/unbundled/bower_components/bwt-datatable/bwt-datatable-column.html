<html><head><script src="../whenever.js/whenever.js"></script>
</head><body><dom-module id="paper-datatable-column">
	<template>
		<style>
			:host {
				display: block;
			}
		</style>
		<template id="arrayTemplate">
			<template is="dom-repeat" items="[[value]]" as="arrayItem">
				<div class="array-item">[[_pdt_getArrayItemLabel(column, arrayItem)]]</div>
			</template>
		</template>
		<template id="editableInputTemplate">
			<paper-input type="[[_pdt_getCorrectTypeForInput(column.type)]]" value="{{value}}" step="any" no-label-float=""></paper-input>
		</template>
		<template id="editableBooleanTemplate">
			<paper-checkbox checked="{{value}}"></paper-checkbox>
		</template>
	</template>

	<script>!function(){"use strict";Polymer({is:"paper-datatable-column",properties:{header:{type:String,notify:!0,observer:"_headerChanged"},property:String,type:{type:String,value:"String"},tooltip:{type:String,notify:!0},sortable:Boolean,sorted:{type:Boolean,notify:!0,observer:"_sortChanged",reflectToAttribute:!0},sortDirection:{type:String,value:"asc",observer:"_sortChanged"},editable:Boolean,arrayDisplayProp:String,cellStyle:{type:String,value:""},align:{type:String,value:"left"},_styleString:{type:String,value:function(){var t=this.align||this.getAttribute("align")||"left",e=this.width||this.getAttribute("width")||0;e+=parseFloat(e).toString()===e?"px":"";var r=this.getAttribute("style")||"";return"text-align:"+t+";min-width:"+e+";"+r}},default:Object,formatValue:Function,sort:Function,dialog:{type:Boolean},editIcon:{type:Boolean},inactive:{type:Boolean,observer:"_requeryColumnList"},resizePriority:{type:Number,value:0},width:Object},behaviors:[Polymer.Templatizer],created:function(){this.beenAttached=new Whenever},ready:function(){var t=Polymer.dom(this).querySelector("template");if(t||"array"!=this.type.toLowerCase()){if(!t&&this.editable&&"string"==this.type.toLowerCase())var t=this.$.editableInputTemplate;else if(!t&&this.editable&&"number"==this.type.toLowerCase())var t=this.$.editableInputTemplate;else if(!t&&this.editable&&"boolean"==this.type.toLowerCase())var t=this.$.editableBooleanTemplate}else var t=this.$.arrayTemplate;t&&(this._instanceProps={},this._instanceProps.item=!0,this._instanceProps.value=!0,this._instanceProps.column=!0,this.templatize(t),this.template=!0)},_createCellInstance:function(t,e){if("undefined"==typeof t[this.property]&&"undefined"!=typeof this.default)var r=this.stamp({item:t,column:this,value:this.default,_dataKey:e});else var r=this.stamp({item:t,column:this,value:t[this.property],_dataKey:e});return r},_formatValue:function(t){if(t=this._cast(t),"formatValue"in this)return this.formatValue(t);if("undefined"==typeof t)return"";var e=this._cast(t);if("string"==this.type.toLowerCase())return e;if("number"==this.type.toLowerCase())return e;if("boolean"==this.type.toLowerCase())return e?"Yes":"No";if("date"==this.type.toLowerCase()){var r=function(t){return t<10?"0"+t:t};return e.getUTCFullYear()+"/"+r(e.getUTCMonth()+1)+"/"+r(e.getUTCDate())+"&nbsp;"+r(e.getUTCHours())+":"+r(e.getUTCMinutes())+":"+r(e.getUTCSeconds())}return console.warn("Complex objects should implement their own template or format-value function.",t),"?"},_sort:function(t,e){return t=this._cast(t),e=this._cast(e),"sort"in this?this.sort(t,e):t<e?-1:t>e?1:0},_cast:function(t){return"undefined"!=typeof t&&null!==t||(t="undefined"!=typeof this.default?JSON.parse(JSON.stringify(this.default)):""),"string"==this.type.toLowerCase()?t.toString():"number"==this.type.toLowerCase()?parseFloat(t):"boolean"==this.type.toLowerCase()?!!t:"date"==this.type.toLowerCase()?new Date(t):t},_sortChanged:function(){this.sorted&&this.beenAttached.whenReady(function(){this.parentNodeRef.sort(this)}.bind(this))},_forwardParentProp:function(t,e){console.warn("_forwardParentProp",arguments)},_forwardParentPath:function(t,e){console.warn("_forwardParentPath",arguments)},_forwardInstanceProp:function(t,e,r){var a=e.split("."),i=a.shift();if("value"==i){var n=["data",t.get("_dataKey"),this.property];r=this._cast(r),this.parentNodeRef.set(n,r)}else"item"==i&&console.warn("_forwardInstanceProp",arguments)},_forwardInstancePath:function(t,e,r){var a=e.split("."),i=a.shift();if("value"==i){var n=["data",t.get("_dataKey"),this.property].concat(a);0==a.length&&(r=this._cast(r))}else if("item"==i)var n=["data",t.get("_dataKey")].concat(a);this.parentNodeRef.set(n,r)},_requeryColumnList:function(){this.beenAttached.state.ready&&this.parentNodeRef._queryAndSetColumns()},_registerEvilFunctions:function(){"undefined"==typeof this.dataHost||"undefined"!=typeof this.parentNodeRef.dataHost?this.dataHost=this.parentNodeRef.dataHost:"undefined"==typeof this.dataHost&&console.warn("A hack is used to support some functionality of the `[editable]` and [`array-display-prop`] attribute. This however requires the element to be located in a polymer element or `dom-bind`."),this.dataHost._pdt_getArrayItemLabel=this._getArrayItemLabel,this.dataHost._pdt_getCorrectTypeForInput=this._getCorrectTypeForInput},_getArrayItemLabel:function(t,e){return t.arrayDisplayProp?e[t.arrayDisplayProp]:e},_getCorrectTypeForInput:function(t){return"string"==t.toLowerCase()?"string":"number"==t.toLowerCase()?"number":void 0},_headerChanged:function(t){this.fire("header-changed")}})}();</script>

</dom-module>
</body></html>